# 三种交换方式
## 电路交换
电话太多的时候用电线两两相连不太现实，因此需要一个中间设备将这些电话连接起来，这个中间设备就是**==交换机==**。
可以将电话交换机简单的看成是一个有多个开关的开关器。可以把电话交换机简单地看成是一个有多个开关的开关器，可以将需要通信的任意两部电话的电话线路按需接通，从而大大减少了连接的电话线数量。当电话机的数量增多时，就需要使用很多彼此连接起来的电话交换机来完成全网的交换任务，用这样的方法，就构成了覆盖全世界的电信网。
- 电话交换机接通电话的方式称为电路交换。
- 从通信资源的分配角度来看，交换就是按照某种方式动态的分配传输线路的资源。
![电话图](C:\Users\1\Desktop\8.jpg)
- 电路交换的三个步骤：
    - ①建立连接（分配通信资源）
    - ②通话（一直占用通信资源）
    - ③释放连接（归还通信资源，是把刚才占用的所有通信资源归还给电信网）

![电路交换](C:\Users\1\Desktop\7.jpg)

## 分组交换
当使用电路交换来传送计算机数据时，其线路的传输效率往往很低。
在因特网中，最重要的分组交换机就是 路由器。
路由器负责将各种网络互连起来，并对接收到的分组进行转发，也就是进行分组交换。

### 来看一个例子：
假设主机H6的用户要给主机H2的用户发送一条消息，通常我们把表示该消息的整块数据成为一个报文。在发送报文之前，先把较长的报文划分为一个个更小的等长数据段，在每一个数据段前面，加上一些由必要的控制信息组成的首部后，就构成了一个分组，也可简称为“包”，首部可称为“包头”。首部作用很大，首部中包含了分组的目的地址，否则分组传输路径中的各分组交换机（也就是各路由器），就不知道如何转发分组了。分组交换机收到一个分组后，先将分组暂时存储下来，再检查其首部，按照首部汇总的目的地址进行查表转发，找到合适的转发接口，通过该接口将分组转发给下一个分组交换机。在本例中，主机H6将所构造出的各分组依次发送出去，各分组经过途中各分组交换机的存储转发，最终到达主机H2，主机H2收到这些分组后，去掉他们的首部，将各数据段组合还原出原始报文。

![接收](C:\Users\1\Desktop\4.jpg)

![发送](C:\Users\1\Desktop\5.jpg)

### 分组传输过程中的两种情况：
- 各分组从源站到目的站可以走不通的路径（也就是不通的路由）
- 另一种是分组乱序，也就是分组到达目的站的顺序不一定与分组在源站的发送顺序相同。
- 注意：期间也可能出现分组丢失、误码、重复等问题。

### 发送方、路由器、接收方三者的作用：
![发送方、路由器、接收方三者作用](C:\Users\1\Desktop\3.jpg)

## 报文交换
与分组交换类似，报文交换中的交换结点也采用存储转发方式。但是报文交换对报文的大小没有限制，这就要求交换结点需要有较大的缓存空间。报文交换主要应用于早期的电报通信网，现在较少使用，通常被较先进的分组交换方式所取代。不再详细介绍报文交换。

## 电路交换、报文交换、分组交换的对比
假设A、B、C、D是分组传输路径上所要经过的4个节点交换机，纵坐标为时间。
![三种交换方式对比](C:\Users\1\Desktop\2.jpg)

对于电路交换，通信之前首先要建立连接，连接建立好之后，就可以使用已建立好的连接进行数据传送，数据传送结束后，需要释放连接，以归还之前建立连接所占用的通道线路资源。
对于报文交换，可以随时发送报文，而不需要事先建立连接，整个报文先传送到相邻结点交换机，全部存储下来后进行查表转发，转发到下一个结点交换机。
对于分组交换，可以随时发送分组，而不需要事先建立连接，构成原始报文的一个个分组，依次在各结点交换机上存储转发，各结点交换机在发送分组的同时，还缓存接收到的分组。
当使用电路交换时，一旦建立连接，中间的各结点交换机就是直通形式的，比特流可以直达终点。
在使用报文交换时，整个报文需要在各结点交换机上进行存储转发，由于不限制报文的大小，因此需要各结点交换机都具有较大的缓存空间。
当使用分组交换时，构成原始报文的一个个分组，在各结点交换机上进行存储转发，相比报文交换，减少了转发时延，还可以避免过长的报文长时间占用链路，同时也有利于进行差错控制。

### 总结：三种方式优缺点

![优缺点](C:\Users\1\Desktop\1.jpg)

